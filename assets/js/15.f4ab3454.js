(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{658:function(t,e,i){},726:function(t,e,i){"use strict";i(658)},804:function(t,e,i){"use strict";i.r(e);i(24);var s=i(721),a=i.n(s),c={name:"VoiceAssistant",props:{list:{type:Array,default:()=>[]}},data:()=>({voiceState:!1,tip:"语音助手关闭",appId:"d57fa021",apiKey:"bdb9f90684f6e2be35b3d7fe687b78ff",voice:null,messagelist:[]}),mounted(){},methods:{voiceCoreInit(t){this.voice=new a.a({onClose:()=>{this.tip="语音助手已经关闭"},onError:t=>{console.info(t)},matchFailed:t=>{console.info(t)},textResponse:({result:t})=>{this.messagelist.push(t)},voiceValue:t=>{const e=document.getElementById("canvas");if(e){const i=e.getContext("2d");i.fillStyle="#8FCE5E",i.clearRect(0,0,300,300),t>1&&i.fillRect(0,0,300,75+.75*t)}},onStart:()=>{this.tip="语音助手已经开启"}},this.voiceCommandData(["打开","切换","转到","开启"],t),this.appId,this.apiKey)},voiceCommandData(t,e){if(!e||!Array.isArray(e))return null;const i=[{id:"exit",text:"结束|关闭|结束语音助手|关闭语音助手|退出",success:this.voiceSuccessCallback}];return this.arraysFlatten(e).forEach(e=>{if(e.children.length<1){const s=t.map(t=>{if(e.name.indexOf("-")>-1){let i=e.name;return i=i.replace("-",""),i=i.replace("/",""),t+i}return t+e.name}).join("|");i.push({id:e.value,text:s,success:this.voiceSuccessCallback,...e})}}),i},voiceSuccessCallback(t){if("exit"===t.id&&this.voice)return this.voice.stop(),void(this.voiceState=!1);this.props.callback&&"function"==typeof this.props.callback&&this.props.callback(t)},arraysFlatten(t,e){let i=[];return t.forEach(t=>{t.children.length<1?i.push(e?{...t,parentId:e.id}:t):i=i.concat(this.arraysFlatten(t.children,t))}),i},voiceStateChange(){this.voice&&(this.voiceState?this.voice.stop():this.voice.start(),this.voiceState=!this.voiceState)}},watch:{list:{handler(t,e){this.voiceCoreInit(t)},immediate:!0,deep:!0}}},n=(i(726),i(2)),o=Object(n.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"voiceAss",on:{click:t.voiceStateChange}},[e("div",{staticClass:"handle"},[e("div",{staticClass:"img"},[e("i",{class:t.voiceState?"el-icon-phone-outline":"el-icon-phone"}),t._v(" "),e("span",[t._v(t._s(t.tip))])]),t._v(" "),e("canvas",{staticClass:"canvas",attrs:{id:"canvas"}})]),t._v(" "),e("div",{staticClass:"message"},t._l(t.messagelist,(function(i,s){return e("div",{key:s,staticClass:"list"},[t._v("\n      "+t._s(i)+"\n    ")])})),0)])}),[],!1,null,"4789b010",null);e.default=o.exports}}]);